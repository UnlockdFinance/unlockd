
> @unlockddao/unlockd-protocol@1.0.2 test:file
> npm run compile && TS_NODE_TRANSPILE_ONLY=1 hardhat test ./test/__setup.spec.ts ./test/${TEST_FILE}


> @unlockddao/unlockd-protocol@1.0.2 compile
> cross-env SKIP_LOAD=true hardhat compile

Nothing to compile
Creating Typechain artifacts in directory types for target ethers-v5
Successfully generated Typechain artifacts!
/Users/adri/work/unlockd-protocol-v1/unlockd-tasks/tasks
Creating Typechain artifacts in directory types for target ethers-v5
Successfully generated Typechain artifacts!

- Enviroment
  - Fork Mode activated at network:  main
  - Provider URL: eth-mainnet.g.alchemy.com
  - Network : hardhat
Deployer: 0x67539d650922Af9D2c611251ac9749f167e51Ac0 Balance: 10000.0 ETH
PoolAdmin: 0x67539d650922Af9D2c611251ac9749f167e51Ac0 Balance: 10000.0 ETH
EmergencyAdmin: 0x653f5769e08FB9cd6c4faC48Bad8a1B64B7Cf85d Balance: 10000.0 ETH
LendPool Liquidator: 0xA296478f65BCDA4153343c8D1f24D768110D6e16 Balance: 10000.0 ETH


Migration started


Deploy UNFT Registry


Deploy lend pool
Deploying new libraries implementation...
*** GenericLogic ***

Network: hardhat
tx: 0xe9403c049cf217258d5ff1b90bd541160829e3ec6205af2fc748781213a44664
contract address: 0x26E2E24EBE33D34E88415fa6aE14C87C33FBcC38
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 33452548709
gas used: 84290

******

contracts-helpers:registerContractInJsonDb, contractId: GenericLogic address: 0x26E2E24EBE33D34E88415fa6aE14C87C33FBcC38 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** ReserveLogic ***

Network: hardhat
tx: 0xb83b299485b724baac79b995a0fbf7df8005717eb7d3ba746a94e120f76ac558
contract address: 0x99F8004245fd740Eee907E14FbCA0B6679030b04
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 29450908340
gas used: 171208

******

contracts-helpers:registerContractInJsonDb, contractId: ReserveLogic address: 0x99F8004245fd740Eee907E14FbCA0B6679030b04 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** NftLogic ***

Network: hardhat
tx: 0x49a0210b89d2fed01fe98ab56c650aef3674c72108cd3d4fa8f9872b5b86a6dd
contract address: 0x46343361Ef2b0a7917160B1762282970DE0F27eB
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 25992356507
gas used: 141022

******

contracts-helpers:registerContractInJsonDb, contractId: NftLogic address: 0x46343361Ef2b0a7917160B1762282970DE0F27eB deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** ValidationLogic ***

Network: hardhat
tx: 0x1f218ed51c0b7ff2da331f335ed9e5eb4f68933a4a1fdf96884ee4cf17b2f03f
contract address: 0xb93B673FcC340c81D93b4d482b8451Ca4CF12C68
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 22939084476
gas used: 1573518

******

contracts-helpers:registerContractInJsonDb, contractId: ValidationLogic address: 0xb93B673FcC340c81D93b4d482b8451Ca4CF12C68 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** SupplyLogic ***

Network: hardhat
tx: 0x71ef1e4558ff691cf202fd280fcb7eba5cb4b23550470e7ff26901715ecbfd84
contract address: 0xEAf162687EF016F189CEBA6d51A25571A96dEa96
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 20889902618
gas used: 1235281

******

contracts-helpers:registerContractInJsonDb, contractId: SupplyLogic address: 0xEAf162687EF016F189CEBA6d51A25571A96dEa96 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** BorrowLogic ***

Network: hardhat
tx: 0x29467bcbd2d600c2676c0b4c03677a9f1bce95cac80ea90e380868ae71a8cbc7
contract address: 0xD4b33077B7fD153C086BA53d3dC015Ce4Bc72077
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 18897030631
gas used: 2117672

******

contracts-helpers:registerContractInJsonDb, contractId: BorrowLogic address: 0xD4b33077B7fD153C086BA53d3dC015Ce4Bc72077 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** LiquidateLogic ***

Network: hardhat
tx: 0x24ddba3e7c263fff5fd84fea78a2fda05e53214f6d83711043dffbdaea61f137
contract address: 0xc0F76A7803950584503681bcD5849473ecafbB2f
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 17420946796
gas used: 3977175

******

contracts-helpers:registerContractInJsonDb, contractId: LiquidateLogic address: 0xc0F76A7803950584503681bcD5849473ecafbB2f deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** LiquidateMarketsLogic ***

Network: hardhat
tx: 0x610fe20775e721285089a6fd66eb5e6616fa67a2b9161d8080f34910aaced6da
contract address: 0x1585f2dCcCACc5eDe1bC7F34E3f47360f6C9fb15
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 16679753730
gas used: 3025524

******

contracts-helpers:registerContractInJsonDb, contractId: LiquidateMarketsLogic address: 0x1585f2dCcCACc5eDe1bC7F34E3f47360f6C9fb15 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** LendingLogic ***

Network: hardhat
tx: 0xaf94df605f4079e9b625ea6270de3a31d54b325700e32f2f3e9e242ac321d327
contract address: 0x48b86797F545b291c5aB86233fC14ff924819A7A
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 15672384338
gas used: 72217

******

contracts-helpers:registerContractInJsonDb, contractId: LendingLogic address: 0x48b86797F545b291c5aB86233fC14ff924819A7A deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
*** ConfiguratorLogic ***

Network: hardhat
tx: 0x41bf699702e4d70e20f20b63a4ea660ae68b2f48bf74625727a66523231715d3
contract address: 0xC7553877733B9cAfc396A254906f4dBFdE24F0D9
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 13859613316
gas used: 1970106

******

contracts-helpers:registerContractInJsonDb, contractId: ConfiguratorLogic address: 0xC7553877733B9cAfc396A254906f4dBFdE24F0D9 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Deploying new lend pool implementation ...
contracts-helpers:insertContractAddressInDb, id: LendPoolImpl address 0x7aD5757a964d8E73ae75607E023ac7C3EBF2AaA6
*** LendPool ***

Network: hardhat
tx: 0x619bde92f805d439fc83ec3c22d26ae1b74009da03c816bef6cf005c3c381ebb
contract address: 0x7aD5757a964d8E73ae75607E023ac7C3EBF2AaA6
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 12760892603
gas used: 5269514

******

contracts-helpers:registerContractInJsonDb, contractId: LendPool address: 0x7aD5757a964d8E73ae75607E023ac7C3EBF2AaA6 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Setting lend pool implementation with address: 0x7aD5757a964d8E73ae75607E023ac7C3EBF2AaA6
contracts-helpers:insertContractAddressInDb, id: LendPool address 0xFC7f036a8FB66D031675239413F9179A82932a53
Deploying new loan implementation...
contracts-helpers:insertContractAddressInDb, id: LendPoolLoanImpl address 0xF30bEeAD1A45849d9edd58ead8fd8C493769c2e0
*** LendPoolLoan ***

Network: hardhat
tx: 0x5dcff67e802ccdf7d11dbbf473bbc70075fb3bee25ac8aca21ef03caa87b3f29
contract address: 0xF30bEeAD1A45849d9edd58ead8fd8C493769c2e0
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 11103378762
gas used: 3272699

******

contracts-helpers:registerContractInJsonDb, contractId: LendPoolLoan address: 0xF30bEeAD1A45849d9edd58ead8fd8C493769c2e0 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Setting lend pool loan implementation with address: 0xF30bEeAD1A45849d9edd58ead8fd8C493769c2e0
contracts-helpers:insertContractAddressInDb, id: LendPoolLoan address 0x00da789CEBF4A0da965FbcB9e4d72F1A15c67Eb6
Deploying new configurator implementation...
contracts-helpers:insertContractAddressInDb, id: LendPoolConfiguratorImpl address 0xA38aF170a6030A4AA6A73F27e31913896D02d9E5
*** LendPoolConfigurator ***

Network: hardhat
tx: 0x6f7ab2b9a5d1a658f4f73a647e9a98e024a6aaa4e1b9eb1ff3aaa90c80161b17
contract address: 0xA38aF170a6030A4AA6A73F27e31913896D02d9E5
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 9324648494
gas used: 5230541

******

contracts-helpers:registerContractInJsonDb, contractId: LendPoolConfigurator address: 0xA38aF170a6030A4AA6A73F27e31913896D02d9E5 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Setting lend pool configurator implementation with address: 0xA38aF170a6030A4AA6A73F27e31913896D02d9E5
contracts-helpers:insertContractAddressInDb, id: LendPoolConfigurator address 0x82CefdbdFe6c4A868962E7B78A3CE54f952FE209
Deploying new generic UToken implementation...
*** UToken ***

Network: hardhat
tx: 0xba72104155e1030d4e9d4f081bfec29416a43a3b8bdaa6b2e2c9fd95f69795e5
contract address: 0xeDfBc20906e2A6EEdF51CF9E0847EE12E8C24a38
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 7264559551
gas used: 2710730

******

contracts-helpers:registerContractInJsonDb, contractId: UToken address: 0xeDfBc20906e2A6EEdF51CF9E0847EE12E8C24a38 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Upgrading UTokens with implementation  0xeDfBc20906e2A6EEdF51CF9E0847EE12E8C24a38
{ WETH: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2' }
[
  '0xE6cd031FB0D9A79FD8CD3035B9228F78ff459B07',
  '800000000000000000000000000',
  '200000000000000000000000000',
  '160000000000000000000000000',
  '2000000000000000000000000000'
]
*** InterestRate ***

Network: hardhat
tx: 0xea2e71fca42fa49d570f6ee0ee81ace0158b1606ddbec11d624ce7a81a839dc3
contract address: 0x46dBEC49711AB9b6231571c9BB8566a61c7F2403
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 4919856480
gas used: 613848

******

contracts-helpers:registerContractInJsonDb, contractId: InterestRate address: 0x46dBEC49711AB9b6231571c9BB8566a61c7F2403 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
contracts-helpers:rawInsertContractAddressInDb, id: rateStrategyWETH address undefined


Deploy reserve oracle
PROXY admin: 0xb7493E15Af772c14c7cE3180Ff388925e6593c6b
contracts-helpers:insertContractAddressInDb, id: ReserveOracleImpl address 0x619D601151F99eA38D058419B7f9c4dC21bE5f74
*** ReserveOracle ***

Network: hardhat
tx: 0xfafe0162b6ac437219a1a7527d375312730126af64e50b79475815d68457868b
contract address: 0x619D601151F99eA38D058419B7f9c4dC21bE5f74
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 4048043026
gas used: 1211618

******

contracts-helpers:registerContractInJsonDb, contractId: ReserveOracle address: 0x619D601151F99eA38D058419B7f9c4dC21bE5f74 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Deploying new reserve oracle proxy & implementation...
*** ReserveOracle ***

Network: hardhat
tx: 0x7f0026402204f39d7f186a28c9c90128cb51ae12e772d9e3d3c5e5bf796956a9
contract address: 0x9af65377B22db90Bf8E244118D900cb5912C06A0
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 3741195556
gas used: 689038

******

contracts-helpers:registerContractInJsonDb, contractId: ReserveOracle address: 0x9af65377B22db90Bf8E244118D900cb5912C06A0 deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
Reserve Oracle: proxy 0x9af65377B22db90Bf8E244118D900cb5912C06A0, implementation 0x619D601151F99eA38D058419B7f9c4dC21bE5f74
-> Deploy mock reserve oracle...
*** MockReserveOracle ***

Network: hardhat
tx: 0x9d1aee6b1cb11c4766c55611bb9e9eccbb7c05b8dd1363d3cb424d228adb0fe2
contract address: 0x5e26B6dFe23592f0f66dd148DA0E38a602539F8e
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 2871064402
gas used: 1280668

******

contracts-helpers:registerContractInJsonDb, contractId: MockReserveOracle address: 0x5e26B6dFe23592f0f66dd148DA0E38a602539F8e deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
-> Deploy mock ChainLink oracle...
*** MockChainlinkOracle ***

Network: hardhat
tx: 0x071f00c44a6c74dacbbf6cc6981a933bed5413ef1513ce58f47a7f55f14f03d5
contract address: 0x9bD271073c7BC8BDa93Be6f7b3B85Bd30fEAa7FE
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 2477712559
gas used: 620122

******

contracts-helpers:registerContractInJsonDb, contractId: MockChainlinkOracle address: 0x9bD271073c7BC8BDa93Be6f7b3B85Bd30fEAa7FE deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0


Deploy nft oracle
Reuse existed nft oracle: 0xed1a46EBE904dD6562f5F20A515009752Fb5bAdE
-> Prepare mock nft oracle...
*** MockNFTOracle ***

Network: hardhat
tx: 0x8abd1ab8e6eeba59576c484ed911e319ab8931720fd308b653c6b050dd4b6333
contract address: 0xE265605de1d4560F231f6c2739F1e7D2A631d84a
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 2148199137
gas used: 1117453

******

contracts-helpers:registerContractInJsonDb, contractId: MockNFTOracle address: 0xE265605de1d4560F231f6c2739F1e7D2A631d84a deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0


Initialize lend pool
Setting YVaultWETH with address:  0xa258C4606Ca8206D8aA700cE2143D7db854D168c  in addressesProvider...


Deploy WETH Gateway


Deploy PUNK Gateway


Deploy data provider
*** UnlockdProtocolDataProvider ***

Network: hardhat
tx: 0x4a02e3cc5de6490688aaf5e4cc41ae6c90479030c19fb34b6e9b6ae5b96f6db8
contract address: 0xDD6f141853933161aa9988Ca1A437a70feC0347b
deployer address: 0x67539d650922Af9D2c611251ac9749f167e51Ac0
gas price: 1791885873
gas used: 2891625

******

contracts-helpers:registerContractInJsonDb, contractId: UnlockdProtocolDataProvider address: 0xDD6f141853933161aa9988Ca1A437a70feC0347b deployer 0x67539d650922Af9D2c611251ac9749f167e51Ac0
UnlockdProtocolDataProvider deployed at: 0xDD6f141853933161aa9988Ca1A437a70feC0347b


Finished migrations
Contracts deployed at hardhat
---------------------------------
N# Contracts: 44
UnlockdProxyAdminPool: 0xb7493E15Af772c14c7cE3180Ff388925e6593c6b
NFTOracleImpl: 0x07AfB905B34EF28505283a09a94603e9B40C3f31
NFTOracle: 0xed1a46EBE904dD6562f5F20A515009752Fb5bAdE
CryptoPunksMarket: 0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb
WrappedPunk: 0xb7F7F6C52F2e2fdb1963Eab30438024864c313F6
UnlockdProxyAdminFund: 0x38a97DE7216b54FCc83A918CF5dB1Bb0447913a4
LendPoolAddressesProvider: 0xE6cd031FB0D9A79FD8CD3035B9228F78ff459B07
LendPoolAddressesProviderRegistry: 0xe5BF48BC5Fd3FCD1c7Fc76795C7b08ccc139a949
ReserveLogic: 0x102Ca0665b83f1B01497E4afD0088FA7d645C5C1
NftLogic: 0x6dF83F6ba030C420d602E9a4302DB8f1DeEDd712
GenericLogic: 0x5520945C3261a51D8e014De4389acC51Fc926b9e
ValidationLogic: 0x8749e3e58A437ecA1B7dfA7046c99a51Cd784Def
SupplyLogic: 0xBA92072f11bbd7492f3419D1dfc85d6FFf730685
BorrowLogic: 0x25d2B642B2a485958a6A00c19f37082AbFF276Cd
LiquidateLogic: 0x91212942a1cda9342ffEF653Dc73e0130688f9F3
ConfiguratorLogic: 0x0919A0c32D7578F507760986a693D2E3D0E598a0
LendPoolImpl: 0x4216Ac4Ad3C6838889Cc80aa5E34e6F57e7839B6
LendPool: 0xFC7f036a8FB66D031675239413F9179A82932a53
LendPoolLoanImpl: 0x6FfD77E502b561E08CdE65C311bf920d9FE1dB88
LendPoolLoan: 0x00da789CEBF4A0da965FbcB9e4d72F1A15c67Eb6
LendPoolConfiguratorImpl: 0xC4576F34dfeFd15011947E787e818ad490F7df37
LendPoolConfigurator: 0x82CefdbdFe6c4A868962E7B78A3CE54f952FE209
UToken: 0x13D3f5C8FC7c05e7cc2d60690381aaB016137300
DebtToken: 0xE4Bc9E74428b5E8C4fAdB53D5eF39C9A9902909c
ReserveOracleImpl: 0x71a22E1b4D1113CF82898caf709F8F0190FBAaC2
ReserveOracle: 0x2954B6ce3E9788e2A6dE603358918f2eb067AABa
InterestRate: 0x2c8C82fBEA936860BD7b20a756E098360cBAF05B
rateStrategyWETH: 0x2c8C82fBEA936860BD7b20a756E098360cBAF05B
WETHGatewayImpl: 0xFbD2Bcee595C6dd9897d09F8aac4dE4d25Da2406
WETHGateway: 0x66CD472E4404D0C62d7068b4D69e28D5Ed6C32c2
PunkGatewayImpl: 0xf49c6c3A753643eF9a31A1cfBD1d38e364A1637c
PunkGateway: 0x2540b104310EFa795DE0a9247Ba3942b71385251
WalletBalanceProvider: 0x95F9b68e4F8dC809127B1A3437b3531197E273Ea
UnlockdProtocolDataProvider: 0x4ABde724f8d7CB5ec7b22A9b86824591bE9fDc86
UIPoolDataProvider: 0x2CF74101dF653E166Cbf699EeED6FaB599293BcD
WPUNKS: 0xb7F7F6C52F2e2fdb1963Eab30438024864c313F6
BAYC: 0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D
DOODLE: 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e
AZUKI: 0xED5AF388653567Af2F388E6224dC7C4b3241C544
MockIncentivesController: 0xf40a2617170af5d8079D7a476F6475b2106328D4
UNFT: 0x1014BBC1ED63CC49e6118769D412E715A1cEbCD8
UNFTRegistryImpl: 0xC048366Bd89c48Abb763bB5d4c436b6990c241E9
UNFTRegistry: 0x255f25335662c88Fcc7deC402cADf2f4f0E08300
LiquidateMarketsLogic: 0xB7BBE03f2E0F384DA800aD3c4E29e0C3b70Da7D9 

Deployer: 0x67539d650922Af9D2c611251ac9749f167e51Ac0 Balance: 9999.53925693132793869
PoolAdmin: 0x67539d650922Af9D2c611251ac9749f167e51Ac0 Balance: 9999.53925693132793869
EmergencyAdmin: 0x653f5769e08FB9cd6c4faC48Bad8a1B64B7Cf85d Balance: 9999.998922722440385737
LendPoolLiquidator: 0xA296478f65BCDA4153343c8D1f24D768110D6e16 Balance: 10000.0
-> Initialize make suite...
uDai undefined
uUSDC undefined
uWETH 0x302Ceac15678E3238D19a0C4714533701169C217
daiAdd undefined
usdcAdd undefined
wethAdd 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2

***************
Setup and snapshot finished
***************

  UToken: Yearn integration

    1) User 0 deposits 10 WETH in an empty reserve, WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken

    2) User 1 deposits 10 WETH in the reserve, WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken

    3) User 0 withdraws 10 WETH, WETH is withdrawn from the Yearn Vault and WETH is given back to user

    4) User 2 deposits 1000 WETH in the reserve. WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken

    5) User 2 withdraws 500 WETH from the reserve, then 500 more. WETH is withdrawn from Yearn Vault and WETH is given back to user

·---------------------------------------------------------------|---------------------------|-------------|-----------------------------·
|                      [90mSolc version: 0.8.4[39m                      ·  [90mOptimizer enabled: true[39m  ·  [90mRuns: 200[39m  ·  [90mBlock limit: 12450000 gas[39m  │
································································|···························|·············|······························
|  [32m[1mMethods[22m[39m                                                                                                                              │
······························|·································|·············|·············|·············|···············|··············
|  [1mContract[22m                   ·  [1mMethod[22m                         ·  [32mMin[39m        ·  [32mMax[39m        ·  [32mAvg[39m        ·  [1m# calls[22m      ·  [1meur (avg)[22m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mERC20Upgradeable[39m           ·  approve                        ·      [36m29000[39m  ·      [31m46100[39m  ·      41825  ·            [90m8[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mERC20Upgradeable[39m           ·  transfer                       ·      [36m51594[39m  ·      [31m51606[39m  ·      51597  ·            [90m8[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setAddress                     ·      [36m49369[39m  ·      [31m49381[39m  ·      49373  ·            [90m3[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setLendPoolConfiguratorImpl    ·          -  ·          -  ·      43350  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setLendPoolImpl                ·          -  ·          -  ·      43351  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setLendPoolLoanImpl            ·          -  ·          -  ·      43396  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setNFTOracle                   ·          -  ·          -  ·      27521  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setReserveOracle               ·          -  ·          -  ·      30254  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolAddressesProvider[39m  ·  setUnlockdDataProvider         ·          -  ·          -  ·      30321  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolConfigurator[39m       ·  setPoolPause                   ·      [36m64309[39m  ·      [31m84052[39m  ·      70890  ·            [90m3[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolConfigurator[39m       ·  setReserveInterestRateAddress  ·          -  ·          -  ·      66225  ·            [90m1[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mLendPoolConfigurator[39m       ·  updateUToken                   ·          -  ·          -  ·      89336  ·            [90m1[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockLendPoolVersionN[39m       ·  deposit                        ·     [36m288096[39m  ·     [31m315447[39m  ·     306330  ·            [90m3[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockLendPoolVersionN[39m       ·  setTimeframe                   ·          -  ·          -  ·      61022  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockLendPoolVersionN[39m       ·  withdraw                       ·     [36m319032[39m  ·     [31m321897[39m  ·     320465  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockNFTOracle[39m              ·  initialize                     ·          -  ·          -  ·     113794  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockReserveOracle[39m          ·  initialize                     ·          -  ·          -  ·      90917  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockReserveOracle[39m          ·  setAggregators                 ·          -  ·          -  ·     101406  ·            [90m2[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mMockUTokenVersionN[39m         ·  sweepUToken                    ·          -  ·          -  ·     134846  ·            [90m1[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [90mSelfdestructTransfer[39m       ·  destroyAndTransfer             ·          -  ·          -  ·      29265  ·            [90m8[39m  ·          [32m[90m-[32m[39m  │
······························|·································|·············|·············|·············|···············|··············
|  [32m[1mDeployments[22m[39m                                                  ·                                         ·  [1m% of limit[22m   ·             │
································································|·············|·············|·············|···············|··············
|  BorrowLogic                                                  ·          -  ·          -  ·    2117672  ·         [90m17 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  ConfiguratorLogic                                            ·          -  ·          -  ·    1970106  ·       [90m15.8 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  GenericLogic                                                 ·          -  ·          -  ·      84290  ·        [90m0.7 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  InterestRate                                                 ·          -  ·          -  ·     613848  ·        [90m4.9 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LendingLogic                                                 ·          -  ·          -  ·      72217  ·        [90m0.6 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LendPool                                                     ·          -  ·          -  ·    5269514  ·       [90m42.3 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LendPoolConfigurator                                         ·          -  ·          -  ·    5230541  ·         [90m42 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LendPoolLoan                                                 ·          -  ·          -  ·    3272699  ·       [90m26.3 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LiquidateLogic                                               ·          -  ·          -  ·    3977175  ·       [90m31.9 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  LiquidateMarketsLogic                                        ·          -  ·          -  ·    3025524  ·       [90m24.3 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  MockChainlinkOracle                                          ·          -  ·          -  ·     620122  ·          [90m5 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  MockNFTOracle                                                ·          -  ·          -  ·    1117453  ·          [90m9 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  MockReserveOracle                                            ·          -  ·          -  ·    1280668  ·       [90m10.3 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  NftLogic                                                     ·          -  ·          -  ·     141022  ·        [90m1.1 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  ReserveLogic                                                 ·          -  ·          -  ·     171208  ·        [90m1.4 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  ReserveOracle                                                ·          -  ·          -  ·    1211618  ·        [90m9.7 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  SelfdestructTransfer                                         ·          -  ·          -  ·      88001  ·        [90m0.7 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  SupplyLogic                                                  ·          -  ·          -  ·    1235281  ·        [90m9.9 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  UnlockdProtocolDataProvider                                  ·          -  ·          -  ·    2891625  ·       [90m23.2 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  UnlockdUpgradeableProxy                                      ·          -  ·          -  ·     689038  ·        [90m5.5 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  UToken                                                       ·          -  ·          -  ·    2710730  ·       [90m21.8 %[39m  ·          [32m[90m-[32m[39m  │
································································|·············|·············|·············|···············|··············
|  ValidationLogic                                              ·          -  ·          -  ·    1573518  ·       [90m12.6 %[39m  ·          [32m[90m-[32m[39m  │
·---------------------------------------------------------------|-------------|-------------|-------------|---------------|-------------·

  0 passing (1m)
  5 failing

  1) UToken: Yearn integration
       User 0 deposits 10 WETH in an empty reserve, WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken:
     AssertionError: Expected "138770826290145056823" to be within [138770826290145056830,138770826290145057830]
      at Context.<anonymous> (test/yearn.spec.ts:70:55)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)
      at runNextTicks (node:internal/process/task_queues:64:3)
      at listOnTimeout (node:internal/timers:533:9)
      at processTimers (node:internal/timers:507:7)

  2) UToken: Yearn integration
       User 1 deposits 10 WETH in the reserve, WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken:
     AssertionError: Expected "19438831648366467187" to be within [144596552322125089354,144596552322125090354]
      at Context.<anonymous> (test/yearn.spec.ts:93:47)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)
      at runNextTicks (node:internal/process/task_queues:64:3)
      at listOnTimeout (node:internal/timers:533:9)
      at processTimers (node:internal/timers:507:7)

  3) UToken: Yearn integration
       User 0 withdraws 10 WETH, WETH is withdrawn from the Yearn Vault and WETH is given back to user:
     AssertionError: Expected "561376866" to be equal 0
      at Context.<anonymous> (test/yearn.spec.ts:123:48)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)
      at runNextTicks (node:internal/process/task_queues:64:3)
      at listOnTimeout (node:internal/timers:533:9)
      at processTimers (node:internal/timers:507:7)

  4) UToken: Yearn integration
       User 2 deposits 1000 WETH in the reserve. WETH is deposited into Yearn Vault and yvWETH wrapped tokens are given back to UToken:
     AssertionError: Expected "981660998242506592919" to be within [1106818718911158059721,1106818718911158060721]
      at Context.<anonymous> (test/yearn.spec.ts:155:47)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)
      at runNextTicks (node:internal/process/task_queues:64:3)
      at listOnTimeout (node:internal/timers:533:9)
      at processTimers (node:internal/timers:507:7)

  5) UToken: Yearn integration
       User 2 withdraws 500 WETH from the reserve, then 500 more. WETH is withdrawn from Yearn Vault and WETH is given back to user:

      AssertionError: Expected "500000000007335041045" to be equal 500000000000000000000
      + expected - actual

       {
      -  "_hex": "0x1b1ae4d6e2ef500000"
      +  "_hex": "0x1b1ae4d6e4a483d815"
         "_isBigNumber": true
       }
      
      at Context.<anonymous> (test/yearn.spec.ts:188:48)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)
      at runNextTicks (node:internal/process/task_queues:64:3)
      at listOnTimeout (node:internal/timers:533:9)
      at processTimers (node:internal/timers:507:7)



